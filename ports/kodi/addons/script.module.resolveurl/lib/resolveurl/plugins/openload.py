# -*- coding: utf-8 -*-
"""
openload.io urlresolver plugin
Copyright (C) 2015 tknorris

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
"""
import os
import xbmc
import json
from resolveurl import common
from resolveurl.common import i18n
from resolveurl.resolver import ResolveUrl, ResolverError
import urllib
import requests
import base64
import re
import sys
reload(sys)
sys.setdefaultencoding('utf8')
logger = common.log_utils.Logger.get_logger(__name__)
logger.disable()

API_BASE_URL = 'https://api.openload.co/1'
INFO_URL = API_BASE_URL + '/streaming/info'
GET_URL = API_BASE_URL + '/streaming/get?file={media_id}'
FILE_URL = API_BASE_URL + '/file/info?file={media_id}'
OL_PATH = os.path.join(common.plugins_path, 'ol_gmu.py')

class OpenLoadResolver(ResolveUrl):
    name = "openload"
    domains = ["openload.io", "openload.co", "oload.tv", "oload.stream"]
    pattern = '(?://|\.)(o(?:pen)??load\.(?:io|co|tv|stream))/(?:embed|f)/([0-9a-zA-Z-_]+)'

    def __init__(self):
        self.net = common.Net()
    def get_media_url(self,host,media_id):
        #url = "http://80.211.204.157:4000/"+str(media_id)
        url = "https://openload.co/embed/"+str(media_id)
        r = requests.get(url)
        data = r.text
        #orgData = """ﾟωﾟﾉ= /｀ｍ´）ﾉ ~┻━┻   //*´∇｀*/ ['_']; o=(ﾟｰﾟ)  =_=3; c=(ﾟΘﾟ) =(ﾟｰﾟ)-(ﾟｰﾟ); (ﾟДﾟ) =(ﾟΘﾟ)= (o^_^o)/ (o^_^o);(ﾟДﾟ)={ﾟΘﾟ: '_' ,ﾟωﾟﾉ : ((ﾟωﾟﾉ==3) +'_') [ﾟΘﾟ] ,ﾟｰﾟﾉ :(ﾟωﾟﾉ+ '_')[o^_^o -(ﾟΘﾟ)] ,ﾟДﾟﾉ:((ﾟｰﾟ==3) +'_')[ﾟｰﾟ] }; (ﾟДﾟ) [ﾟΘﾟ] =((ﾟωﾟﾉ==3) +'_') [c^_^o];(ﾟДﾟ) ['c'] = ((ﾟДﾟ)+'_') [ (ﾟｰﾟ)+(ﾟｰﾟ)-(ﾟΘﾟ) ];(ﾟДﾟ) ['o'] = ((ﾟДﾟ)+'_') [ﾟΘﾟ];(ﾟoﾟ)=(ﾟДﾟ) ['c']+(ﾟДﾟ) ['o']+(ﾟωﾟﾉ +'_')[ﾟΘﾟ]+ ((ﾟωﾟﾉ==3) +'_') [ﾟｰﾟ] + ((ﾟДﾟ) +'_') [(ﾟｰﾟ)+(ﾟｰﾟ)]+ ((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+((ﾟｰﾟ==3) +'_') [(ﾟｰﾟ) - (ﾟΘﾟ)]+(ﾟДﾟ) ['c']+((ﾟДﾟ)+'_') [(ﾟｰﾟ)+(ﾟｰﾟ)]+ (ﾟДﾟ) ['o']+((ﾟｰﾟ==3) +'_') [ﾟΘﾟ];(ﾟДﾟ) ['_'] =(o^_^o) [ﾟoﾟ] [ﾟoﾟ];(ﾟεﾟ)=((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+ (ﾟДﾟ) .ﾟДﾟﾉ+((ﾟДﾟ)+'_') [(ﾟｰﾟ) + (ﾟｰﾟ)]+((ﾟｰﾟ==3) +'_') [o^_^o -ﾟΘﾟ]+((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+ (ﾟωﾟﾉ +'_') [ﾟΘﾟ]; (ﾟｰﾟ)+=(ﾟΘﾟ); (ﾟДﾟ)[ﾟεﾟ]='\\'; (ﾟДﾟ).ﾟΘﾟﾉ=(ﾟДﾟ+ ﾟｰﾟ)[o^_^o -(ﾟΘﾟ)];(oﾟｰﾟo)=(ﾟωﾟﾉ +'_')[c^_^o];(ﾟДﾟ) [ﾟoﾟ]='\"';(ﾟДﾟ) ['_'] ( (ﾟДﾟ) ['_'] (ﾟεﾟ+(ﾟДﾟ)[ﾟoﾟ]+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((o^_^o) +(o^_^o) +(c^_^o))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (-~0)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ (-~3)+ (-~3)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((o^_^o) +(o^_^o) +(c^_^o))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (o^_^o))+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (o^_^o))+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+(-~3)+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ (-~0)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((c^_^o)-(c^_^o))+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ (-~1)+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (-~0)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((c^_^o)-(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ (-~-~1)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+(-~3)+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (o^_^o))+ (-~-~1)+ (ﾟДﾟ)[ﾟoﾟ]) (ﾟΘﾟ)) ('_');var _0x9495=['\x5a\x66\x74','\x70\x6f\x77','\x74\x63\x56','\x45\x41\x6b','\x51\x48\x62','\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74','\x31\x31\x7c\x31\x32\x7c\x31\x33\x7c\x30\x7c\x31\x34\x7c\x33\x7c\x32\x7c\x39\x7c\x31\x36\x7c\x31\x7c\x34\x7c\x38\x7c\x35\x7c\x36\x7c\x31\x35\x7c\x31\x30\x7c\x37','\x73\x70\x6c\x69\x74','\x78\x58\x4d','\x6c\x65\x6e\x67\x74\x68','\x6a\x4c\x61','\x73\x75\x62\x73\x74\x72\x69\x6e\x67','\x61\x5a\x50','\x64\x4f\x44','\x50\x6f\x79','\x77\x72\x69\x74\x65','\x70\x75\x73\x68','\x64\x6b\x46','\x74\x65\x78\x74','\x74\x6a\x66','\x48\x49\x5a','\x57\x79\x58','\x66\x61\x7a','\x47\x63\x79','\x75\x63\x73','\x32\x7c\x30\x7c\x35\x7c\x34\x7c\x33\x7c\x31','\x64\x68\x68','\x70\x51\x75','\x65\x4d\x7a','\x5a\x42\x44','\x4c\x6e\x6b','\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65','\x44\x59\x6c','\x34\x7c\x33\x7c\x30\x7c\x35\x7c\x36\x7c\x32\x7c\x31','\x57\x4f\x61','\x67\x7a\x77','\x63\x42\x56'];(function(_0x1f55fe,_0x45ae62){var _0x3d4039=function(_0x32de24){while(--_0x32de24){_0x1f55fe['\x70\x75\x73\x68'](_0x1f55fe['\x73\x68\x69\x66\x74']());}};_0x3d4039(++_0x45ae62);}(_0x9495,0xbf));var _0x5949=function(_0x1f55fe,_0x45ae62){_0x1f55fe=_0x1f55fe-0x0;var _0x3d4039=_0x9495[_0x1f55fe];return _0x3d4039;};$(document)['\x72\x65\x61\x64\x79'](function(){var _0x45ae41={'\x78\x58\x4d':function _0x184df4(_0x3f842b,_0x6062d8){return _0x3f842b<_0x6062d8;},'\x6a\x4c\x61':function _0x3457b8(_0x38f439,_0x457b87){return _0x38f439*_0x457b87;},'\x61\x5a\x50':function _0x961da7(_0x56acea,_0x37f246){return _0x56acea+_0x37f246;},'\x64\x4f\x44':function _0x2dfccb(_0x44ea34,_0xe1a069,_0x49022f){return _0x44ea34(_0xe1a069,_0x49022f);},'\x50\x6f\x79':function _0x170b95(_0x49e0ac,_0x204c53){return _0x49e0ac in _0x204c53;},'\x64\x6b\x46':function _0x275cbe(_0x48d105,_0x930083){return _0x48d105(_0x930083);},'\x74\x6a\x66':function _0x2af2f3(_0x5d6e96,_0x41b58f){return _0x5d6e96*_0x41b58f;},'\x48\x49\x5a':function _0x1ccc24(_0x2f473c,_0xef0da5){return _0x2f473c^_0xef0da5;},'\x57\x79\x58':function _0x83e7c(_0x4fa9eb,_0x4fc60d){return _0x4fa9eb^_0x4fc60d;},'\x66\x61\x7a':function _0x7ec967(_0x1d25ce,_0x2d0418){return _0x1d25ce^_0x2d0418;},'\x47\x63\x79':function _0x3346a1(_0x5cef79,_0x59b5a3){return _0x5cef79%_0x59b5a3;},'\x75\x63\x73':function _0x2f75f3(_0x3e1dda,_0x192d4c){return _0x3e1dda<_0x192d4c;},'\x64\x68\x68':function _0x2cc0da(_0x240c12,_0x5b7c4c){return _0x240c12*_0x5b7c4c;},'\x70\x51\x75':function _0xe29029(_0x45e457,_0x88979d){return _0x45e457/_0x88979d;},'\x65\x4d\x7a':function _0xe40d05(_0x5a668a,_0x2c7bd1){return _0x5a668a<<_0x2c7bd1;},'\x5a\x42\x44':function _0x46f50e(_0x5ba232,_0x312024){return _0x5ba232&_0x312024;},'\x4c\x6e\x6b':function _0x56789d(_0x3aa5f8,_0x3172ef){return _0x3aa5f8!=_0x3172ef;},'\x44\x59\x6c':function _0x19031e(_0x144a2e,_0x309a9f){return _0x144a2e>>_0x309a9f;},'\x57\x4f\x61':function _0x1689bf(_0x39dbf0,_0x42e9f7){return _0x39dbf0 in _0x42e9f7;},'\x67\x7a\x77':function _0x5cedc0(_0x21a7ef,_0x482441){return _0x21a7ef<_0x482441;},'\x63\x42\x56':function _0x47a063(_0x47d3f1,_0x4bebf9){return _0x47d3f1<<_0x4bebf9;},'\x5a\x66\x74':function _0x533710(_0x3fbb19,_0x2691b7){return _0x3fbb19&_0x2691b7;},'\x74\x63\x56':function _0x32ae2b(_0x524ea6,_0x3d4c00){return _0x524ea6>=_0x3d4c00;},'\x45\x41\x6b':function _0xc9d930(_0xcaad79,_0x4bf3dc,_0x1666a8){return _0xcaad79(_0x4bf3dc,_0x1666a8);},'\x51\x48\x62':function _0x5b77e5(_0x177c9e,_0x33caaa){return _0x177c9e>=_0x33caaa;}};function pt(){try{null[0]();}catch(e){if(typeof e.stack != 'undefined'){if(e.stack.toString().indexOf('phantomjs')!=-1){return !![]}}return ![];}};var _0x23d67d=_0x5949('0x0')[_0x5949('0x1')]('\x7c'),_0x436e75=0x0;while(!![]){switch(_0x23d67d[_0x436e75++]){case'\x30':var _0x1bf6e5='';continue;case'\x31':for(i=0x0;_0x45ae41[_0x5949('0x2')](i,_0x439a49[_0x5949('0x3')]);i+=0x8){_0x41e0ff=_0x45ae41[_0x5949('0x4')](i,0x8);var _0x40b427=_0x439a49[_0x5949('0x5')](i,_0x45ae41[_0x5949('0x6')](i,0x8));var _0x577716=_0x45ae41[_0x5949('0x7')](parseInt,_0x40b427,0x10);with(_0x31f4aa){ke[_0x5949('0xa')](_0x577716);}}continue;case'\x32':var _0x439a49=_0x5d72cd[_0x5949('0x5')](0x0,_0x41e0ff);continue;case'\x33':var _0xccbe62=_0x5d72cd[_0x5949('0x3')];continue;case'\x34':_0x3d7b02=_0x31f4aa['\x6b\x65'];with(Math){};continue;case'\x35':_0x5d72cd=_0x5d72cd[_0x5949('0x5')](_0x41e0ff);continue;case'\x36':var _0x439a49=0x0;continue;case'\x37':_0x45ae41[_0x5949('0xb')]($,'\x23\x73\x74\x72\x65\x61\x6d\x75\x72\x6a')[_0x5949('0xc')](_0x1bf6e5);continue;case'\x38':_0x41e0ff=_0x45ae41[_0x5949('0x4')](0x9,0x8);continue;case'\x39':var _0x3d7b02=[];continue;case'\x31\x30':while(_0x45ae41[_0x5949('0x2')](_0x439a49,_0x5d72cd[_0x5949('0x3')])){var _0x138ee5='\x35\x7c\x38\x7c\x30\x7c\x31\x32\x7c\x31\x33\x7c\x39\x7c\x31\x30\x7c\x34\x7c\x31\x31\x7c\x36\x7c\x33\x7c\x31\x7c\x37\x7c\x32'[_0x5949('0x1')]('\x7c'),_0x2d6ce4=0x0;while(!![]){switch(_0x138ee5[_0x2d6ce4++]){case'\x30':var _0x896767=0x0;continue;case'\x31':var _0x2de433=_0x45ae41[_0x5949('0x6')](_0x45ae41[_0x5949('0xd')](_0x5eb93a,0x2),_0x37c346);continue;case'\x32':_0x145894+=0x1;continue;case'\x33':_0x30725e=_0x45ae41[_0x5949('0xe')](_0x45ae41[_0x5949('0xf')](_0x30725e,(parseInt('1112071121246',8)-898+0x4)/(28-0x8)),_1x4bfb36);continue;case'\x34':var _0x59ce16=0x28a28dec;continue;case'\x35':var _0x5eb93a=0x40;continue;case'\x36':var _0x30725e=_0x45ae41[_0x5949('0x10')](_0x896767,_0x3d7b02[_0x45ae41[_0x5949('0x11')](_0x145894,0x9)]);continue;case'\x37':for(i=0x0;_0x45ae41[_0x5949('0x12')](i,0x4);i++){var _0x444853=_0x5949('0x13')[_0x5949('0x1')]('\x7c'),_0x3d6c21=0x0;while(!![]){switch(_0x444853[_0x3d6c21++]){case'\x30':var _0x1a0e90=_0x45ae41[_0x5949('0x14')](_0x45ae41[_0x5949('0x15')](_0x41e0ff,0x9),i);continue;case'\x31':_0x2de433=_0x45ae41[_0x5949('0x16')](_0x2de433,_0x45ae41[_0x5949('0x15')](_0x41e0ff,0x9));continue;case'\x32':var _0x1a9381=_0x45ae41[_0x5949('0x17')](_0x30725e,_0x2de433);continue;case'\x33':if(_0x45ae41[_0x5949('0x18')](_0x3fa834,'$'))_0x1bf6e5+=_0x3fa834;continue;case'\x34':var _0x3fa834=String[_0x5949('0x19')](_0x1a9381-1);continue;case'\x35':_0x1a9381=_0x45ae41[_0x5949('0x1a')](_0x1a9381,_0x1a0e90);continue;}break;}}continue;case'\x38':var _0x37c346=0x7f;continue;case'\x39':var _0x31f4aa={'\x6d\x6d':0x80,'\x78\x78':0x3f};continue;case'\x31\x30':do{var _0x1fb52e=_0x5949('0x1b')[_0x5949('0x1')]('\x7c'),_0x204cab=0x0;while(!![]){switch(_0x1fb52e[_0x204cab++]){case'\x30':_0x439a49++;continue;case'\x31':_0x1a873b+=0x6;continue;case'\x32':with(_0x31f4aa){if(_0x45ae41[_0x5949('0x1d')](_0x1a873b,_0x45ae41[_0x5949('0x14')](0x6,0x5))){var _0x332549=_0x45ae41[_0x5949('0x17')](_0x3d9c8e,xx);_0x896767+=_0x45ae41[_0x5949('0x1e')](_0x332549,_0x1a873b);}else{var _0x332549=_0x45ae41[_0x5949('0x1f')](_0x3d9c8e,xx);_0x896767+=_0x45ae41[_0x5949('0x14')](_0x332549,Math[_0x5949('0x20')](0x2,_0x1a873b));}}continue;case'\x33':var _0x1fa71e=_0x5d72cd[_0x5949('0x5')](_0x439a49,_0x45ae41[_0x5949('0x6')](_0x439a49,0x2));continue;case'\x34':if(_0x45ae41[_0x5949('0x21')](_0x45ae41[_0x5949('0x6')](_0x439a49,0x1),_0x5d72cd[_0x5949('0x3')])){_0x5eb93a=0x8f;}continue;case'\x35':_0x439a49++;continue;case'\x36':_0x3d9c8e=_0x45ae41[_0x5949('0x22')](parseInt,_0x1fa71e,0x10);continue;}break;}}while(_0x45ae41[_0x5949('0x23')](_0x3d9c8e,_0x5eb93a));continue;case'\x31\x31':var _1x4bfb36=parseInt('36155760706',8)-20;continue;case'\x31\x32':var _0x1a873b=0x0;continue;case'\x31\x33':var _0x3d9c8e=0x0;continue;}break;}}continue;case'\x31\x31':var _0x531f91=_0x45ae41['\x64\x6b\x46']($,_0x45ae41[_0x5949('0x6')]('\x23',z))[_0x5949('0xc')]();continue;case'\x31\x32':var _0x5d72cd=_0x531f91[_0x5949('0x24')](0x0);continue;case'\x31\x33':_0x5d72cd=_0x531f91;continue;case'\x31\x34':var _0x41e0ff=_0x45ae41[_0x5949('0x14')](0x9,0x8);continue;case'\x31\x35':var _0x145894=0x0;continue;case'\x31\x36':var _0x31f4aa={'\x6b':_0x439a49,'\x6b\x65':[]};continue;}break;}});"""
        marker = 'ﾟωﾟﾉ= /｀ｍ´）ﾉ'
        orgData = str(data)
        orgData = re.search("""ﾟωﾟﾉ= \/｀ｍ´）ﾉ(.*)\}\);""",orgData)
        orgData = marker + orgData.group(1) + "});"
        orgData = orgData.replace("]='\\'; (","]='\\\\'; (")
        orgData = re.sub('''if\s*\([^\}]+?typeof[^\}]+?\}''', '', orgData)
        orgData = re.sub('''if\s*\([^\}]+?document[^\}]+?\}''', '', orgData)

        encTab = re.compile('''<span[^>]+?id="[^"]*?"[^>]*?>([^<]+?)<\/span>''').findall(data)

        for e in encTab:
            if len(e) > 40:
                encTab.insert(0, e)
                break

        jscode = base64.b64decode(
            '''ICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSAiJXMiDQogICAgICAgICAgICAgICAgICAgICAgLCBkZWNvZGVkDQogICAgICAgICAgICAgICAgICAgICAgLCBkb2N1bWVudCA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgLCB3aW5kb3cgPSB0aGlzDQogICAgICAgICAgICAgICAgICAgICAgLCAkID0gZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbihhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWQgPSBhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTogZnVuY3Rpb24oYSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihkLCB3KXsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKCl7fTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGYgPSBbJ2Nsb3NlJywnY3JlYXRlQXR0cmlidXRlJywnY3JlYXRlRG9jdW1lbnRGcmFnbWVudCcsJ2NyZWF0ZUVsZW1lbnQnLCdjcmVhdGVFbGVtZW50TlMnLCdjcmVhdGVFdmVudCcsJ2NyZWF0ZU5TUmVzb2x2ZXInLCdjcmVhdGVSYW5nZScsJ2NyZWF0ZVRleHROb2RlJywnY3JlYXRlVHJlZVdhbGtlcicsJ2V2YWx1YXRlJywnZXhlY0NvbW1hbmQnLCdnZXRFbGVtZW50QnlJZCcsJ2dldEVsZW1lbnRzQnlOYW1lJywnZ2V0RWxlbWVudHNCeVRhZ05hbWUnLCdpbXBvcnROb2RlJywnb3BlbicsJ3F1ZXJ5Q29tbWFuZEVuYWJsZWQnLCdxdWVyeUNvbW1hbmRJbmRldGVybScsJ3F1ZXJ5Q29tbWFuZFN0YXRlJywncXVlcnlDb21tYW5kVmFsdWUnLCd3cml0ZScsJ3dyaXRlbG4nXTsNCiAgICAgICAgICAgICAgICAgICAgICBkZi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RbZV09Zjt9KTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9fID0gWydhbmNob3JzJywnYXBwbGV0cycsJ2JvZHknLCdkZWZhdWx0VmlldycsJ2RvY3R5cGUnLCdkb2N1bWVudEVsZW1lbnQnLCdlbWJlZHMnLCdmaXJzdENoaWxkJywnZm9ybXMnLCdpbWFnZXMnLCdpbXBsZW1lbnRhdGlvbicsJ2xpbmtzJywnbG9jYXRpb24nLCdwbHVnaW5zJywnc3R5bGVTaGVldHMnXTsNCiAgICAgICAgICAgICAgICAgICAgICBkb18uZm9yRWFjaChmdW5jdGlvbihlKXtkW2VdPW87fSk7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIGRzID0gWydVUkwnLCdjaGFyYWN0ZXJTZXQnLCdjb21wYXRNb2RlJywnY29udGVudFR5cGUnLCdjb29raWUnLCdkZXNpZ25Nb2RlJywnZG9tYWluJywnbGFzdE1vZGlmaWVkJywncmVmZXJyZXInLCd0aXRsZSddOw0KICAgICAgICAgICAgICAgICAgICAgIGRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZFtlXT1zO30pOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciB3YiA9IFsnY2xvc2VkJywnaXNTZWN1cmVDb250ZXh0J107DQogICAgICAgICAgICAgICAgICAgICAgd2IuZm9yRWFjaChmdW5jdGlvbihlKXt3W2VdPWI7fSk7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIHdmID0gWydhZGRFdmVudExpc3RlbmVyJywnYWxlcnQnLCdhdG9iJywnYmx1cicsJ2J0b2EnLCdjYW5jZWxBbmltYXRpb25GcmFtZScsJ2NhcHR1cmVFdmVudHMnLCdjbGVhckludGVydmFsJywnY2xlYXJUaW1lb3V0JywnY2xvc2UnLCdjb25maXJtJywnY3JlYXRlSW1hZ2VCaXRtYXAnLCdkaXNwYXRjaEV2ZW50JywnZmV0Y2gnLCdmaW5kJywnZm9jdXMnLCdnZXRDb21wdXRlZFN0eWxlJywnZ2V0U2VsZWN0aW9uJywnbWF0Y2hNZWRpYScsJ21vdmVCeScsJ21vdmVUbycsJ29wZW4nLCdwb3N0TWVzc2FnZScsJ3Byb21wdCcsJ3JlbGVhc2VFdmVudHMnLCdyZW1vdmVFdmVudExpc3RlbmVyJywncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywncmVzaXplQnknLCdyZXNpemVUbycsJ3Njcm9sbCcsJ3Njcm9sbEJ5Jywnc2Nyb2xsVG8nLCdzZXRJbnRlcnZhbCcsJ3NldFRpbWVvdXQnLCdzdG9wJ107DQogICAgICAgICAgICAgICAgICAgICAgd2YuZm9yRWFjaChmdW5jdGlvbihlKXt3W2VdPWY7fSk7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIHduID0gWydkZXZpY2VQaXhlbFJhdGlvJywnaW5uZXJIZWlnaHQnLCdpbm5lcldpZHRoJywnbGVuZ3RoJywnb3V0ZXJIZWlnaHQnLCdvdXRlcldpZHRoJywncGFnZVhPZmZzZXQnLCdwYWdlWU9mZnNldCcsJ3NjcmVlblgnLCdzY3JlZW5ZJywnc2Nyb2xsWCcsJ3Njcm9sbFknXTsNCiAgICAgICAgICAgICAgICAgICAgICB3bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3dbZV09bjt9KTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgd28gPSBbJ2FwcGxpY2F0aW9uQ2FjaGUnLCdjYWNoZXMnLCdjcnlwdG8nLCdleHRlcm5hbCcsJ2ZyYW1lRWxlbWVudCcsJ2ZyYW1lcycsJ2hpc3RvcnknLCdpbmRleGVkREInLCdsb2NhbFN0b3JhZ2UnLCdsb2NhdGlvbicsJ2xvY2F0aW9uYmFyJywnbWVudWJhcicsJ25hdmlnYXRvcicsJ29uYWJvcnQnLCdvbmFuaW1hdGlvbmVuZCcsJ29uYW5pbWF0aW9uaXRlcmF0aW9uJywnb25hbmltYXRpb25zdGFydCcsJ29uYmVmb3JldW5sb2FkJywnb25ibHVyJywnb25jYW5wbGF5Jywnb25jYW5wbGF5dGhyb3VnaCcsJ29uY2hhbmdlJywnb25jbGljaycsJ29uY29udGV4dG1lbnUnLCdvbmRibGNsaWNrJywnb25kZXZpY2Vtb3Rpb24nLCdvbmRldmljZW9yaWVudGF0aW9uJywnb25kcmFnJywnb25kcmFnZW5kJywnb25kcmFnZW50ZXInLCdvbmRyYWdsZWF2ZScsJ29uZHJhZ292ZXInLCdvbmRyYWdzdGFydCcsJ29uZHJvcCcsJ29uZHVyYXRpb25jaGFuZ2UnLCdvbmVtcHRpZWQnLCdvbmVuZGVkJywnb25lcnJvcicsJ29uZm9jdXMnLCdvbmhhc2hjaGFuZ2UnLCdvbmlucHV0Jywnb25pbnZhbGlkJywnb25rZXlkb3duJywnb25rZXlwcmVzcycsJ29ua2V5dXAnLCdvbmxhbmd1YWdlY2hhbmdlJywnb25sb2FkJywnb25sb2FkZWRkYXRhJywnb25sb2FkZWRtZXRhZGF0YScsJ29ubG9hZHN0YXJ0Jywnb25tZXNzYWdlJywnb25tb3VzZWRvd24nLCdvbm1vdXNlZW50ZXInLCdvbm1vdXNlbGVhdmUnLCdvbm1vdXNlbW92ZScsJ29ubW91c2VvdXQnLCdvbm1vdXNlb3ZlcicsJ29ubW91c2V1cCcsJ29ub2ZmbGluZScsJ29ub25saW5lJywnb25wYWdlaGlkZScsJ29ucGFnZXNob3cnLCdvbnBhdXNlJywnb25wbGF5Jywnb25wbGF5aW5nJywnb25wb3BzdGF0ZScsJ29ucHJvZ3Jlc3MnLCdvbnJhdGVjaGFuZ2UnLCdvbnJlc2V0Jywnb25yZXNpemUnLCdvbnNjcm9sbCcsJ29uc2Vla2VkJywnb25zZWVraW5nJywnb25zZWxlY3QnLCdvbnNob3cnLCdvbnN0YWxsZWQnLCdvbnN0b3JhZ2UnLCdvbnN1Ym1pdCcsJ29uc3VzcGVuZCcsJ29udGltZXVwZGF0ZScsJ29udG9nZ2xlJywnb250cmFuc2l0aW9uZW5kJywnb251bmxvYWQnLCdvbnZvbHVtZWNoYW5nZScsJ29ud2FpdGluZycsJ29ud2Via2l0YW5pbWF0aW9uZW5kJywnb253ZWJraXRhbmltYXRpb25pdGVyYXRpb24nLCdvbndlYmtpdGFuaW1hdGlvbnN0YXJ0Jywnb253ZWJraXR0cmFuc2l0aW9uZW5kJywnb253aGVlbCcsJ29wZW5lcicsJ3BhcmVudCcsJ3BlcmZvcm1hbmNlJywncGVyc29uYWxiYXInLCdzY3JlZW4nLCdzY3JvbGxiYXJzJywnc2VsZicsJ3Nlc3Npb25TdG9yYWdlJywnc3BlZWNoU3ludGhlc2lzJywnc3RhdHVzYmFyJywndG9vbGJhcicsJ3RvcCddOw0KICAgICAgICAgICAgICAgICAgICAgIHdvLmZvckVhY2goZnVuY3Rpb24oZSl7d1tlXT1vO30pOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciB3cyA9IFsnbmFtZSddOw0KICAgICAgICAgICAgICAgICAgICAgIHdzLmZvckVhY2goZnVuY3Rpb24oZSl7d1tlXT1zO30pOw0KICAgICAgICAgICAgICAgICAgICB9KShkb2N1bWVudCwgd2luZG93KTsNCiAgICAgICAgICAgICAgICAgICAgJXM7DQogICAgICAgICAgICAgICAgICAgIHByaW50KGRlY29kZWQpOw==''') % (
             encTab[0], orgData)

        import ftplib
        basePath = "special://temp//jscode.js"
        path = xbmc.translatePath(basePath)
        thefile = open(path, 'w')
        thefile.write(jscode.encode('utf8'))
        thefile.close()
        session = ftplib.FTP('77.55.238.225','admin_test','test')
        file = open(path,'rb')                  # file to send
        session.storbinary('STOR /jscode.js', file)     # send the file
        file.close()                                    # close file and FTP
        session.quit()

        s = requests.Session()
        r = s.get("https://unknow.nazwa.pl:5000/openloadapi",verify=False)
        result = r.text.replace('\n','')
        return 'https://openload.co/stream/%s?mime=true|User-Agent=Mozilla/5.0' % result
        #return 'http://80.211.204.157/testproxy/index.php?q=' + url[:-10]
    
    def get_url(self, host, media_id):
        #url = "http://80.211.204.157:4000/"+str(media_id)
        url = "https://openload.co/embed/"+str(media_id)
        r = requests.get(url)
        data = r.text
        #orgData = """ﾟωﾟﾉ= /｀ｍ´）ﾉ ~┻━┻   //*´∇｀*/ ['_']; o=(ﾟｰﾟ)  =_=3; c=(ﾟΘﾟ) =(ﾟｰﾟ)-(ﾟｰﾟ); (ﾟДﾟ) =(ﾟΘﾟ)= (o^_^o)/ (o^_^o);(ﾟДﾟ)={ﾟΘﾟ: '_' ,ﾟωﾟﾉ : ((ﾟωﾟﾉ==3) +'_') [ﾟΘﾟ] ,ﾟｰﾟﾉ :(ﾟωﾟﾉ+ '_')[o^_^o -(ﾟΘﾟ)] ,ﾟДﾟﾉ:((ﾟｰﾟ==3) +'_')[ﾟｰﾟ] }; (ﾟДﾟ) [ﾟΘﾟ] =((ﾟωﾟﾉ==3) +'_') [c^_^o];(ﾟДﾟ) ['c'] = ((ﾟДﾟ)+'_') [ (ﾟｰﾟ)+(ﾟｰﾟ)-(ﾟΘﾟ) ];(ﾟДﾟ) ['o'] = ((ﾟДﾟ)+'_') [ﾟΘﾟ];(ﾟoﾟ)=(ﾟДﾟ) ['c']+(ﾟДﾟ) ['o']+(ﾟωﾟﾉ +'_')[ﾟΘﾟ]+ ((ﾟωﾟﾉ==3) +'_') [ﾟｰﾟ] + ((ﾟДﾟ) +'_') [(ﾟｰﾟ)+(ﾟｰﾟ)]+ ((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+((ﾟｰﾟ==3) +'_') [(ﾟｰﾟ) - (ﾟΘﾟ)]+(ﾟДﾟ) ['c']+((ﾟДﾟ)+'_') [(ﾟｰﾟ)+(ﾟｰﾟ)]+ (ﾟДﾟ) ['o']+((ﾟｰﾟ==3) +'_') [ﾟΘﾟ];(ﾟДﾟ) ['_'] =(o^_^o) [ﾟoﾟ] [ﾟoﾟ];(ﾟεﾟ)=((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+ (ﾟДﾟ) .ﾟДﾟﾉ+((ﾟДﾟ)+'_') [(ﾟｰﾟ) + (ﾟｰﾟ)]+((ﾟｰﾟ==3) +'_') [o^_^o -ﾟΘﾟ]+((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+ (ﾟωﾟﾉ +'_') [ﾟΘﾟ]; (ﾟｰﾟ)+=(ﾟΘﾟ); (ﾟДﾟ)[ﾟεﾟ]='\\'; (ﾟДﾟ).ﾟΘﾟﾉ=(ﾟДﾟ+ ﾟｰﾟ)[o^_^o -(ﾟΘﾟ)];(oﾟｰﾟo)=(ﾟωﾟﾉ +'_')[c^_^o];(ﾟДﾟ) [ﾟoﾟ]='\"';(ﾟДﾟ) ['_'] ( (ﾟДﾟ) ['_'] (ﾟεﾟ+(ﾟДﾟ)[ﾟoﾟ]+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((o^_^o) +(o^_^o) +(c^_^o))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (-~0)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ (-~3)+ (-~3)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((o^_^o) +(o^_^o) +(c^_^o))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (o^_^o))+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (o^_^o))+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+(-~3)+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ (-~0)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((c^_^o)-(c^_^o))+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ (-~1)+ (-~1)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (-~0)+ (ﾟДﾟ)[ﾟεﾟ]+(-~0)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((c^_^o)-(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ ((o^_^o) +(o^_^o) +(c^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ (-~-~1)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o) +(c^_^o))+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+(-~3)+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (o^_^o))+ (-~-~1)+ (ﾟДﾟ)[ﾟoﾟ]) (ﾟΘﾟ)) ('_');var _0x9495=['\x5a\x66\x74','\x70\x6f\x77','\x74\x63\x56','\x45\x41\x6b','\x51\x48\x62','\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74','\x31\x31\x7c\x31\x32\x7c\x31\x33\x7c\x30\x7c\x31\x34\x7c\x33\x7c\x32\x7c\x39\x7c\x31\x36\x7c\x31\x7c\x34\x7c\x38\x7c\x35\x7c\x36\x7c\x31\x35\x7c\x31\x30\x7c\x37','\x73\x70\x6c\x69\x74','\x78\x58\x4d','\x6c\x65\x6e\x67\x74\x68','\x6a\x4c\x61','\x73\x75\x62\x73\x74\x72\x69\x6e\x67','\x61\x5a\x50','\x64\x4f\x44','\x50\x6f\x79','\x77\x72\x69\x74\x65','\x70\x75\x73\x68','\x64\x6b\x46','\x74\x65\x78\x74','\x74\x6a\x66','\x48\x49\x5a','\x57\x79\x58','\x66\x61\x7a','\x47\x63\x79','\x75\x63\x73','\x32\x7c\x30\x7c\x35\x7c\x34\x7c\x33\x7c\x31','\x64\x68\x68','\x70\x51\x75','\x65\x4d\x7a','\x5a\x42\x44','\x4c\x6e\x6b','\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65','\x44\x59\x6c','\x34\x7c\x33\x7c\x30\x7c\x35\x7c\x36\x7c\x32\x7c\x31','\x57\x4f\x61','\x67\x7a\x77','\x63\x42\x56'];(function(_0x1f55fe,_0x45ae62){var _0x3d4039=function(_0x32de24){while(--_0x32de24){_0x1f55fe['\x70\x75\x73\x68'](_0x1f55fe['\x73\x68\x69\x66\x74']());}};_0x3d4039(++_0x45ae62);}(_0x9495,0xbf));var _0x5949=function(_0x1f55fe,_0x45ae62){_0x1f55fe=_0x1f55fe-0x0;var _0x3d4039=_0x9495[_0x1f55fe];return _0x3d4039;};$(document)['\x72\x65\x61\x64\x79'](function(){var _0x45ae41={'\x78\x58\x4d':function _0x184df4(_0x3f842b,_0x6062d8){return _0x3f842b<_0x6062d8;},'\x6a\x4c\x61':function _0x3457b8(_0x38f439,_0x457b87){return _0x38f439*_0x457b87;},'\x61\x5a\x50':function _0x961da7(_0x56acea,_0x37f246){return _0x56acea+_0x37f246;},'\x64\x4f\x44':function _0x2dfccb(_0x44ea34,_0xe1a069,_0x49022f){return _0x44ea34(_0xe1a069,_0x49022f);},'\x50\x6f\x79':function _0x170b95(_0x49e0ac,_0x204c53){return _0x49e0ac in _0x204c53;},'\x64\x6b\x46':function _0x275cbe(_0x48d105,_0x930083){return _0x48d105(_0x930083);},'\x74\x6a\x66':function _0x2af2f3(_0x5d6e96,_0x41b58f){return _0x5d6e96*_0x41b58f;},'\x48\x49\x5a':function _0x1ccc24(_0x2f473c,_0xef0da5){return _0x2f473c^_0xef0da5;},'\x57\x79\x58':function _0x83e7c(_0x4fa9eb,_0x4fc60d){return _0x4fa9eb^_0x4fc60d;},'\x66\x61\x7a':function _0x7ec967(_0x1d25ce,_0x2d0418){return _0x1d25ce^_0x2d0418;},'\x47\x63\x79':function _0x3346a1(_0x5cef79,_0x59b5a3){return _0x5cef79%_0x59b5a3;},'\x75\x63\x73':function _0x2f75f3(_0x3e1dda,_0x192d4c){return _0x3e1dda<_0x192d4c;},'\x64\x68\x68':function _0x2cc0da(_0x240c12,_0x5b7c4c){return _0x240c12*_0x5b7c4c;},'\x70\x51\x75':function _0xe29029(_0x45e457,_0x88979d){return _0x45e457/_0x88979d;},'\x65\x4d\x7a':function _0xe40d05(_0x5a668a,_0x2c7bd1){return _0x5a668a<<_0x2c7bd1;},'\x5a\x42\x44':function _0x46f50e(_0x5ba232,_0x312024){return _0x5ba232&_0x312024;},'\x4c\x6e\x6b':function _0x56789d(_0x3aa5f8,_0x3172ef){return _0x3aa5f8!=_0x3172ef;},'\x44\x59\x6c':function _0x19031e(_0x144a2e,_0x309a9f){return _0x144a2e>>_0x309a9f;},'\x57\x4f\x61':function _0x1689bf(_0x39dbf0,_0x42e9f7){return _0x39dbf0 in _0x42e9f7;},'\x67\x7a\x77':function _0x5cedc0(_0x21a7ef,_0x482441){return _0x21a7ef<_0x482441;},'\x63\x42\x56':function _0x47a063(_0x47d3f1,_0x4bebf9){return _0x47d3f1<<_0x4bebf9;},'\x5a\x66\x74':function _0x533710(_0x3fbb19,_0x2691b7){return _0x3fbb19&_0x2691b7;},'\x74\x63\x56':function _0x32ae2b(_0x524ea6,_0x3d4c00){return _0x524ea6>=_0x3d4c00;},'\x45\x41\x6b':function _0xc9d930(_0xcaad79,_0x4bf3dc,_0x1666a8){return _0xcaad79(_0x4bf3dc,_0x1666a8);},'\x51\x48\x62':function _0x5b77e5(_0x177c9e,_0x33caaa){return _0x177c9e>=_0x33caaa;}};function pt(){try{null[0]();}catch(e){if(typeof e.stack != 'undefined'){if(e.stack.toString().indexOf('phantomjs')!=-1){return !![]}}return ![];}};var _0x23d67d=_0x5949('0x0')[_0x5949('0x1')]('\x7c'),_0x436e75=0x0;while(!![]){switch(_0x23d67d[_0x436e75++]){case'\x30':var _0x1bf6e5='';continue;case'\x31':for(i=0x0;_0x45ae41[_0x5949('0x2')](i,_0x439a49[_0x5949('0x3')]);i+=0x8){_0x41e0ff=_0x45ae41[_0x5949('0x4')](i,0x8);var _0x40b427=_0x439a49[_0x5949('0x5')](i,_0x45ae41[_0x5949('0x6')](i,0x8));var _0x577716=_0x45ae41[_0x5949('0x7')](parseInt,_0x40b427,0x10);with(_0x31f4aa){ke[_0x5949('0xa')](_0x577716);}}continue;case'\x32':var _0x439a49=_0x5d72cd[_0x5949('0x5')](0x0,_0x41e0ff);continue;case'\x33':var _0xccbe62=_0x5d72cd[_0x5949('0x3')];continue;case'\x34':_0x3d7b02=_0x31f4aa['\x6b\x65'];with(Math){};continue;case'\x35':_0x5d72cd=_0x5d72cd[_0x5949('0x5')](_0x41e0ff);continue;case'\x36':var _0x439a49=0x0;continue;case'\x37':_0x45ae41[_0x5949('0xb')]($,'\x23\x73\x74\x72\x65\x61\x6d\x75\x72\x6a')[_0x5949('0xc')](_0x1bf6e5);continue;case'\x38':_0x41e0ff=_0x45ae41[_0x5949('0x4')](0x9,0x8);continue;case'\x39':var _0x3d7b02=[];continue;case'\x31\x30':while(_0x45ae41[_0x5949('0x2')](_0x439a49,_0x5d72cd[_0x5949('0x3')])){var _0x138ee5='\x35\x7c\x38\x7c\x30\x7c\x31\x32\x7c\x31\x33\x7c\x39\x7c\x31\x30\x7c\x34\x7c\x31\x31\x7c\x36\x7c\x33\x7c\x31\x7c\x37\x7c\x32'[_0x5949('0x1')]('\x7c'),_0x2d6ce4=0x0;while(!![]){switch(_0x138ee5[_0x2d6ce4++]){case'\x30':var _0x896767=0x0;continue;case'\x31':var _0x2de433=_0x45ae41[_0x5949('0x6')](_0x45ae41[_0x5949('0xd')](_0x5eb93a,0x2),_0x37c346);continue;case'\x32':_0x145894+=0x1;continue;case'\x33':_0x30725e=_0x45ae41[_0x5949('0xe')](_0x45ae41[_0x5949('0xf')](_0x30725e,(parseInt('1112071121246',8)-898+0x4)/(28-0x8)),_1x4bfb36);continue;case'\x34':var _0x59ce16=0x28a28dec;continue;case'\x35':var _0x5eb93a=0x40;continue;case'\x36':var _0x30725e=_0x45ae41[_0x5949('0x10')](_0x896767,_0x3d7b02[_0x45ae41[_0x5949('0x11')](_0x145894,0x9)]);continue;case'\x37':for(i=0x0;_0x45ae41[_0x5949('0x12')](i,0x4);i++){var _0x444853=_0x5949('0x13')[_0x5949('0x1')]('\x7c'),_0x3d6c21=0x0;while(!![]){switch(_0x444853[_0x3d6c21++]){case'\x30':var _0x1a0e90=_0x45ae41[_0x5949('0x14')](_0x45ae41[_0x5949('0x15')](_0x41e0ff,0x9),i);continue;case'\x31':_0x2de433=_0x45ae41[_0x5949('0x16')](_0x2de433,_0x45ae41[_0x5949('0x15')](_0x41e0ff,0x9));continue;case'\x32':var _0x1a9381=_0x45ae41[_0x5949('0x17')](_0x30725e,_0x2de433);continue;case'\x33':if(_0x45ae41[_0x5949('0x18')](_0x3fa834,'$'))_0x1bf6e5+=_0x3fa834;continue;case'\x34':var _0x3fa834=String[_0x5949('0x19')](_0x1a9381-1);continue;case'\x35':_0x1a9381=_0x45ae41[_0x5949('0x1a')](_0x1a9381,_0x1a0e90);continue;}break;}}continue;case'\x38':var _0x37c346=0x7f;continue;case'\x39':var _0x31f4aa={'\x6d\x6d':0x80,'\x78\x78':0x3f};continue;case'\x31\x30':do{var _0x1fb52e=_0x5949('0x1b')[_0x5949('0x1')]('\x7c'),_0x204cab=0x0;while(!![]){switch(_0x1fb52e[_0x204cab++]){case'\x30':_0x439a49++;continue;case'\x31':_0x1a873b+=0x6;continue;case'\x32':with(_0x31f4aa){if(_0x45ae41[_0x5949('0x1d')](_0x1a873b,_0x45ae41[_0x5949('0x14')](0x6,0x5))){var _0x332549=_0x45ae41[_0x5949('0x17')](_0x3d9c8e,xx);_0x896767+=_0x45ae41[_0x5949('0x1e')](_0x332549,_0x1a873b);}else{var _0x332549=_0x45ae41[_0x5949('0x1f')](_0x3d9c8e,xx);_0x896767+=_0x45ae41[_0x5949('0x14')](_0x332549,Math[_0x5949('0x20')](0x2,_0x1a873b));}}continue;case'\x33':var _0x1fa71e=_0x5d72cd[_0x5949('0x5')](_0x439a49,_0x45ae41[_0x5949('0x6')](_0x439a49,0x2));continue;case'\x34':if(_0x45ae41[_0x5949('0x21')](_0x45ae41[_0x5949('0x6')](_0x439a49,0x1),_0x5d72cd[_0x5949('0x3')])){_0x5eb93a=0x8f;}continue;case'\x35':_0x439a49++;continue;case'\x36':_0x3d9c8e=_0x45ae41[_0x5949('0x22')](parseInt,_0x1fa71e,0x10);continue;}break;}}while(_0x45ae41[_0x5949('0x23')](_0x3d9c8e,_0x5eb93a));continue;case'\x31\x31':var _1x4bfb36=parseInt('36155760706',8)-20;continue;case'\x31\x32':var _0x1a873b=0x0;continue;case'\x31\x33':var _0x3d9c8e=0x0;continue;}break;}}continue;case'\x31\x31':var _0x531f91=_0x45ae41['\x64\x6b\x46']($,_0x45ae41[_0x5949('0x6')]('\x23',z))[_0x5949('0xc')]();continue;case'\x31\x32':var _0x5d72cd=_0x531f91[_0x5949('0x24')](0x0);continue;case'\x31\x33':_0x5d72cd=_0x531f91;continue;case'\x31\x34':var _0x41e0ff=_0x45ae41[_0x5949('0x14')](0x9,0x8);continue;case'\x31\x35':var _0x145894=0x0;continue;case'\x31\x36':var _0x31f4aa={'\x6b':_0x439a49,'\x6b\x65':[]};continue;}break;}});"""
        marker = 'ﾟωﾟﾉ= /｀ｍ´）ﾉ'
        orgData = str(data)
        orgData = re.search("""ﾟωﾟﾉ= \/｀ｍ´）ﾉ(.*)\}\);""",orgData)
        orgData = marker + orgData.group(1) + "});"
        orgData = orgData.replace("]='\\'; (","]='\\\\'; (")
        orgData = re.sub('''if\s*\([^\}]+?typeof[^\}]+?\}''', '', orgData)
        orgData = re.sub('''if\s*\([^\}]+?document[^\}]+?\}''', '', orgData)

        encTab = re.compile('''<span[^>]+?id="[^"]*?"[^>]*?>([^<]+?)<\/span>''').findall(data)

        for e in encTab:
            if len(e) > 40:
                encTab.insert(0, e)
                break

        jscode = base64.b64decode(
            '''ICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSAiJXMiDQogICAgICAgICAgICAgICAgICAgICAgLCBkZWNvZGVkDQogICAgICAgICAgICAgICAgICAgICAgLCBkb2N1bWVudCA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgLCB3aW5kb3cgPSB0aGlzDQogICAgICAgICAgICAgICAgICAgICAgLCAkID0gZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbihhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWQgPSBhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTogZnVuY3Rpb24oYSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihkLCB3KXsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKCl7fTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9ICcnOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGYgPSBbJ2Nsb3NlJywnY3JlYXRlQXR0cmlidXRlJywnY3JlYXRlRG9jdW1lbnRGcmFnbWVudCcsJ2NyZWF0ZUVsZW1lbnQnLCdjcmVhdGVFbGVtZW50TlMnLCdjcmVhdGVFdmVudCcsJ2NyZWF0ZU5TUmVzb2x2ZXInLCdjcmVhdGVSYW5nZScsJ2NyZWF0ZVRleHROb2RlJywnY3JlYXRlVHJlZVdhbGtlcicsJ2V2YWx1YXRlJywnZXhlY0NvbW1hbmQnLCdnZXRFbGVtZW50QnlJZCcsJ2dldEVsZW1lbnRzQnlOYW1lJywnZ2V0RWxlbWVudHNCeVRhZ05hbWUnLCdpbXBvcnROb2RlJywnb3BlbicsJ3F1ZXJ5Q29tbWFuZEVuYWJsZWQnLCdxdWVyeUNvbW1hbmRJbmRldGVybScsJ3F1ZXJ5Q29tbWFuZFN0YXRlJywncXVlcnlDb21tYW5kVmFsdWUnLCd3cml0ZScsJ3dyaXRlbG4nXTsNCiAgICAgICAgICAgICAgICAgICAgICBkZi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RbZV09Zjt9KTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9fID0gWydhbmNob3JzJywnYXBwbGV0cycsJ2JvZHknLCdkZWZhdWx0VmlldycsJ2RvY3R5cGUnLCdkb2N1bWVudEVsZW1lbnQnLCdlbWJlZHMnLCdmaXJzdENoaWxkJywnZm9ybXMnLCdpbWFnZXMnLCdpbXBsZW1lbnRhdGlvbicsJ2xpbmtzJywnbG9jYXRpb24nLCdwbHVnaW5zJywnc3R5bGVTaGVldHMnXTsNCiAgICAgICAgICAgICAgICAgICAgICBkb18uZm9yRWFjaChmdW5jdGlvbihlKXtkW2VdPW87fSk7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIGRzID0gWydVUkwnLCdjaGFyYWN0ZXJTZXQnLCdjb21wYXRNb2RlJywnY29udGVudFR5cGUnLCdjb29raWUnLCdkZXNpZ25Nb2RlJywnZG9tYWluJywnbGFzdE1vZGlmaWVkJywncmVmZXJyZXInLCd0aXRsZSddOw0KICAgICAgICAgICAgICAgICAgICAgIGRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZFtlXT1zO30pOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciB3YiA9IFsnY2xvc2VkJywnaXNTZWN1cmVDb250ZXh0J107DQogICAgICAgICAgICAgICAgICAgICAgd2IuZm9yRWFjaChmdW5jdGlvbihlKXt3W2VdPWI7fSk7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIHdmID0gWydhZGRFdmVudExpc3RlbmVyJywnYWxlcnQnLCdhdG9iJywnYmx1cicsJ2J0b2EnLCdjYW5jZWxBbmltYXRpb25GcmFtZScsJ2NhcHR1cmVFdmVudHMnLCdjbGVhckludGVydmFsJywnY2xlYXJUaW1lb3V0JywnY2xvc2UnLCdjb25maXJtJywnY3JlYXRlSW1hZ2VCaXRtYXAnLCdkaXNwYXRjaEV2ZW50JywnZmV0Y2gnLCdmaW5kJywnZm9jdXMnLCdnZXRDb21wdXRlZFN0eWxlJywnZ2V0U2VsZWN0aW9uJywnbWF0Y2hNZWRpYScsJ21vdmVCeScsJ21vdmVUbycsJ29wZW4nLCdwb3N0TWVzc2FnZScsJ3Byb21wdCcsJ3JlbGVhc2VFdmVudHMnLCdyZW1vdmVFdmVudExpc3RlbmVyJywncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywncmVzaXplQnknLCdyZXNpemVUbycsJ3Njcm9sbCcsJ3Njcm9sbEJ5Jywnc2Nyb2xsVG8nLCdzZXRJbnRlcnZhbCcsJ3NldFRpbWVvdXQnLCdzdG9wJ107DQogICAgICAgICAgICAgICAgICAgICAgd2YuZm9yRWFjaChmdW5jdGlvbihlKXt3W2VdPWY7fSk7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIHduID0gWydkZXZpY2VQaXhlbFJhdGlvJywnaW5uZXJIZWlnaHQnLCdpbm5lcldpZHRoJywnbGVuZ3RoJywnb3V0ZXJIZWlnaHQnLCdvdXRlcldpZHRoJywncGFnZVhPZmZzZXQnLCdwYWdlWU9mZnNldCcsJ3NjcmVlblgnLCdzY3JlZW5ZJywnc2Nyb2xsWCcsJ3Njcm9sbFknXTsNCiAgICAgICAgICAgICAgICAgICAgICB3bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3dbZV09bjt9KTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgd28gPSBbJ2FwcGxpY2F0aW9uQ2FjaGUnLCdjYWNoZXMnLCdjcnlwdG8nLCdleHRlcm5hbCcsJ2ZyYW1lRWxlbWVudCcsJ2ZyYW1lcycsJ2hpc3RvcnknLCdpbmRleGVkREInLCdsb2NhbFN0b3JhZ2UnLCdsb2NhdGlvbicsJ2xvY2F0aW9uYmFyJywnbWVudWJhcicsJ25hdmlnYXRvcicsJ29uYWJvcnQnLCdvbmFuaW1hdGlvbmVuZCcsJ29uYW5pbWF0aW9uaXRlcmF0aW9uJywnb25hbmltYXRpb25zdGFydCcsJ29uYmVmb3JldW5sb2FkJywnb25ibHVyJywnb25jYW5wbGF5Jywnb25jYW5wbGF5dGhyb3VnaCcsJ29uY2hhbmdlJywnb25jbGljaycsJ29uY29udGV4dG1lbnUnLCdvbmRibGNsaWNrJywnb25kZXZpY2Vtb3Rpb24nLCdvbmRldmljZW9yaWVudGF0aW9uJywnb25kcmFnJywnb25kcmFnZW5kJywnb25kcmFnZW50ZXInLCdvbmRyYWdsZWF2ZScsJ29uZHJhZ292ZXInLCdvbmRyYWdzdGFydCcsJ29uZHJvcCcsJ29uZHVyYXRpb25jaGFuZ2UnLCdvbmVtcHRpZWQnLCdvbmVuZGVkJywnb25lcnJvcicsJ29uZm9jdXMnLCdvbmhhc2hjaGFuZ2UnLCdvbmlucHV0Jywnb25pbnZhbGlkJywnb25rZXlkb3duJywnb25rZXlwcmVzcycsJ29ua2V5dXAnLCdvbmxhbmd1YWdlY2hhbmdlJywnb25sb2FkJywnb25sb2FkZWRkYXRhJywnb25sb2FkZWRtZXRhZGF0YScsJ29ubG9hZHN0YXJ0Jywnb25tZXNzYWdlJywnb25tb3VzZWRvd24nLCdvbm1vdXNlZW50ZXInLCdvbm1vdXNlbGVhdmUnLCdvbm1vdXNlbW92ZScsJ29ubW91c2VvdXQnLCdvbm1vdXNlb3ZlcicsJ29ubW91c2V1cCcsJ29ub2ZmbGluZScsJ29ub25saW5lJywnb25wYWdlaGlkZScsJ29ucGFnZXNob3cnLCdvbnBhdXNlJywnb25wbGF5Jywnb25wbGF5aW5nJywnb25wb3BzdGF0ZScsJ29ucHJvZ3Jlc3MnLCdvbnJhdGVjaGFuZ2UnLCdvbnJlc2V0Jywnb25yZXNpemUnLCdvbnNjcm9sbCcsJ29uc2Vla2VkJywnb25zZWVraW5nJywnb25zZWxlY3QnLCdvbnNob3cnLCdvbnN0YWxsZWQnLCdvbnN0b3JhZ2UnLCdvbnN1Ym1pdCcsJ29uc3VzcGVuZCcsJ29udGltZXVwZGF0ZScsJ29udG9nZ2xlJywnb250cmFuc2l0aW9uZW5kJywnb251bmxvYWQnLCdvbnZvbHVtZWNoYW5nZScsJ29ud2FpdGluZycsJ29ud2Via2l0YW5pbWF0aW9uZW5kJywnb253ZWJraXRhbmltYXRpb25pdGVyYXRpb24nLCdvbndlYmtpdGFuaW1hdGlvbnN0YXJ0Jywnb253ZWJraXR0cmFuc2l0aW9uZW5kJywnb253aGVlbCcsJ29wZW5lcicsJ3BhcmVudCcsJ3BlcmZvcm1hbmNlJywncGVyc29uYWxiYXInLCdzY3JlZW4nLCdzY3JvbGxiYXJzJywnc2VsZicsJ3Nlc3Npb25TdG9yYWdlJywnc3BlZWNoU3ludGhlc2lzJywnc3RhdHVzYmFyJywndG9vbGJhcicsJ3RvcCddOw0KICAgICAgICAgICAgICAgICAgICAgIHdvLmZvckVhY2goZnVuY3Rpb24oZSl7d1tlXT1vO30pOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciB3cyA9IFsnbmFtZSddOw0KICAgICAgICAgICAgICAgICAgICAgIHdzLmZvckVhY2goZnVuY3Rpb24oZSl7d1tlXT1zO30pOw0KICAgICAgICAgICAgICAgICAgICB9KShkb2N1bWVudCwgd2luZG93KTsNCiAgICAgICAgICAgICAgICAgICAgJXM7DQogICAgICAgICAgICAgICAgICAgIHByaW50KGRlY29kZWQpOw==''') % (
             encTab[0], orgData)

        import ftplib
        basePath = "special://temp//jscode.js"
        path = xbmc.translatePath(basePath)
        thefile = open(path, 'w')
        thefile.write(jscode.encode('utf8'))
        thefile.close()
        session = ftplib.FTP('77.55.238.225','admin_test','test')
        file = open(path,'rb')                  # file to send
        session.storbinary('STOR /jscode.js', file)     # send the file
        file.close()                                    # close file and FTP
        session.quit()

        s = requests.Session()
        r = s.get("https://unknow.nazwa.pl:5000/openloadapi",verify=False)
        result = r.text.replace('\n','')
        return 'https://openload.co/stream/%s?mime=true|User-Agent=Mozilla/5.0' % result
        #return 'http://80.211.204.157/testproxy/index.php?q=' + url[:-10]